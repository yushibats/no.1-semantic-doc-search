@tailwind base;
@tailwind components;
@tailwind utilities;

/* Noto Sans JP フォント設定 */
@font-face {
  font-family: 'Noto Sans JP';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: url('/assets/fonts/NotoSansJP-Regular.woff2') format('woff2');
}

@font-face {
  font-family: 'Noto Sans JP';
  font-style: normal;
  font-weight: 500;
  font-display: swap;
  src: url('/assets/fonts/NotoSansJP-Medium.woff2') format('woff2');
}

@font-face {
  font-family: 'Noto Sans JP';
  font-style: normal;
  font-weight: 700;
  font-display: swap;
  src: url('/assets/fonts/NotoSansJP-Bold.woff2') format('woff2');
}

/* Roboto フォント設定 */
@font-face {
  font-family: 'Roboto';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: url('/assets/fonts/Roboto-Regular.woff2') format('woff2');
}

@font-face {
  font-family: 'Roboto';
  font-style: normal;
  font-weight: 500;
  font-display: swap;
  src: url('/assets/fonts/Roboto-Medium.woff2') format('woff2');
}

@font-face {
  font-family: 'Roboto';
  font-style: normal;
  font-weight: 700;
  font-display: swap;
  src: url('/assets/fonts/Roboto-Bold.woff2') format('woff2');
}

/* カスタムスタイル */
@keyframes fade-in{from{opacity:0}to{opacity:1}}
@keyframes fadeIn{from{opacity:0}to{opacity:1}}
@keyframes fadeOut{from{opacity:1}to{opacity:0}}
.fade-in{animation:fade-in .3s ease-out}
body{background-color:#f5f7fa;font-family:"Noto Sans JP",Roboto,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol",Arial,sans-serif}
.apex-header{background: linear-gradient(135deg, #0f2847 0%, #162d50 100%)}
.apex-region{background-color:#fff;border:1px solid #e2e8f0;box-shadow:0 2px 4px rgba(0,0,0,.06);border-radius:8px}
.apex-region-header{background-color:#f8fafc;border-bottom:1px solid #e2e8f0;padding:16px 20px;font-weight:600;color:#1e293b;font-size:15px;display:flex;justify-content:space-between;align-items:center;border-radius:8px 8px 0 0}
.apex-button{background: linear-gradient(135deg, #1a365d 0%, #0f2847 100%);color:#fff;border:none;border-radius:6px;padding:10px 20px;font-size:14px;transition:all .2s;font-weight:500;box-shadow:0 2px 4px rgba(15,40,71,.25);cursor:pointer}
.apex-button:hover{box-shadow:0 4px 8px rgba(15,40,71,.35);transform:translateY(-1px)}
.apex-button:active{transform:translateY(0);box-shadow:0 2px 4px rgba(15,40,71,.25)}
.apex-button:disabled{opacity:0.6;cursor:not-allowed;transform:none}
.apex-button-secondary{background-color:#fff;color:#475569;border:1.5px solid #cbd5e1;border-radius:6px;padding:10px 20px;font-size:14px;font-weight:500;cursor:pointer;transition:all .2s}
.apex-button-secondary:hover{background-color:#f8fafc;border-color:#94a3b8}
.apex-button-secondary:active{background-color:#f1f5f9}
.apex-button-sm{padding:6px 14px;font-size:13px}
.apex-button-xs{padding:4px 10px;font-size:12px}
.apex-tabs{display:flex;border-bottom:2px solid #e2e8f0;background:#fff;padding:0 24px}
.apex-tab{padding:14px 28px;cursor:pointer;font-size:14px;font-weight:600;color:#64748b;border-bottom:3px solid transparent;transition:all .2s;margin-bottom:-2px}
.apex-tab:hover{color:#1a365d;background-color:#f8fafc}
.apex-tab.active{color:#1a365d;border-bottom-color:#1a365d}
.tab-scroll-container{overflow-y:auto;-webkit-overflow-scrolling:touch}
.tab-content{max-width:1400px;margin:0 auto}
.step-indicator{display:inline-flex;align-items:center;justify-content:center;width:32px;height:32px;border-radius:50%;background:#e2e8f0;color:#64748b;font-weight:600;font-size:14px;transition:all .2s}
.step-indicator.active{background: linear-gradient(135deg, #1a365d 0%, #0f2847 100%);color:#fff}
.step-indicator.completed{background:#10b981;color:#fff}
table{border-collapse:collapse;width:100%}
.table-wrapper{overflow-x:auto;border:1px solid #e2e8f0;border-radius:8px}
.table-wrapper-scrollable{overflow:auto;border:1px solid #e2e8f0;border-radius:8px;max-height:480px}
th{background:#f8fafc;font-weight:600;text-align:left;padding:12px;border-bottom:2px solid #e2e8f0;position:sticky;top:0;z-index:10;white-space:nowrap}
td{padding:10px 12px;border-bottom:1px solid #f1f5f9}
tr:hover{background:#f8fafc}
.chart-container{background:#fff;border-radius:8px;padding:20px;box-shadow:0 2px 4px rgba(0,0,0,.06);max-width:100%;overflow:hidden}
.copilot-panel{position:fixed;right:24px;bottom:24px;width:480px;max-height:750px;background:#fff;border-radius:12px;box-shadow:0 8px 24px rgba(0,0,0,.15);display:flex;flex-direction:column;z-index:9999;transition:all .3s;box-sizing:border-box;}
.copilot-panel.expanded{width:min(900px,95vw);max-height:88vh;box-sizing:border-box;}
.copilot-header{background:linear-gradient(135deg,#0f2847 0%,#162d50 65%,#1e4976 130%);color:#fff;padding:16px 20px;border-radius:12px 12px 0 0;display:flex;justify-content:space-between;align-items:center;cursor:pointer}
.copilot-messages{flex:1;overflow-y:auto;padding:16px;max-height:550px;display:flex;flex-direction:column;box-sizing:border-box;}
.copilot-panel.expanded .copilot-messages{max-height:calc(88vh - 180px);box-sizing:border-box;}
.copilot-message{margin-bottom:12px;padding:10px 14px;border-radius:8px;font-size:14px;line-height:1.5;flex-shrink:0}
.copilot-message h1,.copilot-message h2,.copilot-message h3{font-weight:600;margin:4px 0}
.copilot-message p{margin:4px 0}
.copilot-message ul{margin:4px 0 4px 1.25rem;list-style:disc}
.copilot-message code{background:#e2e8f0;border-radius:4px;padding:2px 4px;font-size:12px}
.copilot-message pre{background:#0f172a;border-radius:6px;padding:10px;margin-top:6px;overflow-x:auto;font-size:12px;color:#fff}
.copilot-message img{max-width:100%;height:auto;display:block;margin:0 auto}
.copilot-message pre code{background:transparent;padding:0;color:#fff}
.copilot-message.user{background:#162d50;color:#fff;margin-left:40px}
.copilot-message.assistant{background:#f1f5f9;color:#1e293b;margin-right:40px}
.copilot-input-area{padding:12px;border-top:1px solid #e2e8f0}
.copilot-input{width:100%;border:1.5px solid #e2e8f0;border-radius:6px;padding:10px;font-size:14px;resize:none}
.copilot-input:focus{outline:none;border-color:#1a365d;box-shadow:0 0 0 3px rgba(26,54,93,.18)}
.copilot-minimized{max-height:60px;width:auto}
.copilot-fab{position:fixed;right:24px;bottom:24px;width:56px;height:56px;border-radius:50%;background:linear-gradient(135deg,#0f2847 0%,#162d50 65%,#1e4976 130%);color:#fff;display:flex;align-items:center;justify-content:center;cursor:pointer;box-shadow:0 4px 12px rgba(15,40,71,.35);z-index:9998;transition:all .3s}
.copilot-fab:hover{transform:scale(1.1);box-shadow:0 6px 18px rgba(15,40,71,.4),0 0 0 3px rgba(30,73,118,.2)}
.copilot-float-button{position:fixed;right:24px;bottom:24px;width:56px;height:56px;border-radius:50%;background:linear-gradient(135deg,#0f2847 0%,#162d50 65%,#1e4976 130%);color:#fff;display:flex;align-items:center;justify-content:center;cursor:pointer;box-shadow:0 4px 12px rgba(15,40,71,.35);z-index:9998;transition:all .3s;border:none}
.copilot-float-button:hover{transform:scale(1.1);box-shadow:0 6px 18px rgba(15,40,71,.4),0 0 0 3px rgba(30,73,118,.2)}

/* Sandbox Panel */
.sandbox-panel{position:fixed;left:24px;bottom:24px;width:520px;max-height:750px;background:#fff;border-radius:12px;box-shadow:0 8px 24px rgba(0,0,0,.15);display:flex;flex-direction:column;z-index:9999;transition:all .3s;box-sizing:border-box;}
.sandbox-panel.expanded{width:min(920px,95vw);max-height:88vh;box-sizing:border-box;}
.sandbox-header{background:linear-gradient(135deg,#3776ab 0%,#2b5b84 100%);color:#fff;padding:16px 20px;border-radius:12px 12px 0 0;display:flex;justify-content:space-between;align-items:center;cursor:move}
.sandbox-content{flex:1;overflow-y:auto;padding:16px;max-height:550px;display:flex;flex-direction:column;box-sizing:border-box;}
.sandbox-panel.expanded .sandbox-content{max-height:calc(88vh - 180px);box-sizing:border-box;}
.sandbox-minimized{max-height:60px;width:auto}
.sandbox-fab{position:fixed;left:24px;bottom:24px;width:56px;height:56px;border-radius:50%;background:linear-gradient(135deg,#3776ab 0%,#2b5b84 100%);color:#fff;display:flex;align-items:center;justify-content:center;cursor:pointer;box-shadow:0 4px 12px rgba(55,118,171,.35);z-index:9998;transition:all .3s}
.sandbox-fab:hover{transform:scale(1.1);box-shadow:0 6px 16px rgba(55,118,171,.45)}
.sandbox-code-input{width:100%;border:1.5px solid #e2e8f0;border-radius:6px;padding:10px;font-size:13px;font-family:monospace;resize:vertical;min-height:200px}
.sandbox-code-input:focus{outline:none;border-color:#3776ab}
.sandbox-panel .copilot-input:focus{outline:none;border-color:#3776ab;box-shadow:0 0 0 3px rgba(255,212,59,.22)}

/* Sandbox Messages */
.sandbox-message{margin-bottom:12px;padding:10px 14px;border-radius:8px;font-size:14px;line-height:1.5;flex-shrink:0}
.sandbox-message h1,.sandbox-message h2,.sandbox-message h3{font-weight:600;margin:4px 0}
.sandbox-message p{margin:4px 0}
.sandbox-message ul{margin:4px 0 4px 1.25rem;list-style:disc}
.sandbox-message code{background:#fff7d6;border-radius:4px;padding:2px 4px;font-size:12px;color:#1e293b}
.sandbox-message pre{background:#0f172a;border-radius:6px;padding:10px;margin-top:6px;overflow-x:auto;font-size:12px;color:#fff}
.sandbox-message img{max-width:100%;height:auto;display:block;margin:0 auto}
.sandbox-message pre code{background:transparent;padding:0;color:#fff}
.sandbox-message.user{background:#3776ab;color:#fff;margin-left:40px}
.sandbox-message.assistant{background:#f1f5f9;color:#1e293b;margin-right:40px}

/* Sandbox送信ボタン */
.sandbox-submit-button{background:linear-gradient(135deg,#3776ab 0%,#2b5b84 100%);color:#fff;border:none;padding:6px 16px;border-radius:6px;font-size:12px;font-weight:600;cursor:pointer;transition:all .2s;box-shadow:0 2px 4px rgba(55,118,171,.22);}
.sandbox-submit-button:hover:not(:disabled){box-shadow:0 4px 10px rgba(55,118,171,.28),0 0 0 3px rgba(255,212,59,.18);transform:translateY(-1px);}
.sandbox-submit-button:disabled{opacity:0.5;cursor:not-allowed;}
.sandbox-panel .exec-code-run-btn{background:linear-gradient(135deg,#3776ab 0%,#2b5b84 100%);box-shadow:0 2px 4px rgba(55,118,171,.22)}
.sandbox-panel .exec-code-run-btn:hover{transform:translateY(-1px);box-shadow:0 4px 10px rgba(55,118,171,.28),0 0 0 3px rgba(255,212,59,.14)}
.sandbox-panel .exec-code-run-btn:active{transform:translateY(0);box-shadow:0 2px 4px rgba(55,118,171,.22)}
.sandbox-panel .sandbox-results-clear-btn:hover{border-color:#93c5fd;background:#eff6ff;color:#1e3a8a}

.result-container table{border-collapse:collapse;width:100%;font-size:12px;}
.result-container th{background:#f1f5f9;color:#475569;font-weight:600;padding:8px 12px;border:1px solid #e2e8f0;text-align:left;white-space:nowrap;position:sticky;top:0;z-index:10;}
.result-container td{padding:6px 12px;border:1px solid #e2e8f0;color:#1e293b;}
.result-container tr:nth-child(even){background:#f8fafc;}
.result-container tr:hover{background:#f1f5f9;}
.result-container .dataframe{margin:0;}

/* Toast Notification */
.toast-container{position:fixed;top:80px;right:24px;z-index:10000;display:flex;flex-direction:column;gap:12px;max-width:430px;}
.toast{background:#fff;border-radius:8px;padding:16px;box-shadow:0 4px 12px rgba(0,0,0,.15);display:flex;align-items:start;gap:12px;animation:toast-slide-in .3s ease-out;min-width:320px;}
@keyframes toast-slide-in{from{transform:translateX(400px);opacity:0}to{transform:translateX(0);opacity:1}}
@keyframes toast-slide-out{from{transform:translateX(0);opacity:1}to{transform:translateX(400px);opacity:0}}
.toast.removing{animation:toast-slide-out .3s ease-out forwards;}
.toast-icon{flex-shrink:0;width:24px;height:24px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-weight:bold;font-size:14px;}
.toast-success .toast-icon{background:#10b981;color:#fff;}
.toast-error .toast-icon{background:#ef4444;color:#fff;}
.toast-info .toast-icon{background:#3b82f6;color:#fff;}
.toast-warning .toast-icon{background:#f59e0b;color:#fff;}
.toast-content{flex:1;}
.toast-title{font-weight:600;font-size:14px;color:#1e293b;margin-bottom:4px;}
.toast-message{font-size:13px;color:#64748b;line-height:1.5;}
.toast-close{flex-shrink:0;width:20px;height:20px;border-radius:4px;display:flex;align-items:center;justify-content:center;cursor:pointer;color:#94a3b8;transition:all .2s;}
.toast-close:hover{background:#f1f5f9;color:#64748b;}

/* 確認モーダル（システム統一デザイン） */
.confirm-modal{position:fixed;inset:0;z-index:10003;display:flex;align-items:center;justify-content:center;padding:16px;animation:modal-fade-in .2s ease-out;}
.confirm-modal-overlay{position:fixed;inset:0;background:rgba(0,0,0,.5);backdrop-filter:blur(4px);-webkit-backdrop-filter:blur(4px);}
.confirm-modal-content{position:relative;background:#fff;border-radius:16px;max-width:420px;width:100%;margin:0 auto;box-shadow:0 20px 60px rgba(0,0,0,.25);animation:modal-scale-in .3s cubic-bezier(.175,.885,.32,1.275);z-index:1;overflow:hidden;}
.confirm-modal-header{padding:24px 24px 0 24px;text-align:center;}
.confirm-modal-icon{width:52px;height:52px;border-radius:12px;display:flex;align-items:center;justify-content:center;margin:0 auto 12px auto;background:linear-gradient(135deg,#f59e0b 0%,#d97706 100%);box-shadow:0 4px 12px rgba(245,158,11,.3);}
.confirm-modal-icon svg{width:24px;height:24px;color:#fff;}
.confirm-modal-icon i{font-size:24px;color:#fff;}
.confirm-modal-title{font-size:18px;font-weight:600;color:#1e293b;margin:0;}
.confirm-modal-body{padding:12px 24px 20px 24px;}
.confirm-modal-body p{color:#475569;line-height:1.6;text-align:center;margin:0;font-size:14px;white-space:pre-line;}
.confirm-modal-footer{padding:0 24px 24px 24px;display:flex;justify-content:center;gap:12px;}
.confirm-modal-btn{padding:10px 20px;border-radius:6px;font-size:14px;font-weight:500;border:none;cursor:pointer;transition:all .2s ease;min-width:100px;}
.confirm-modal-btn:hover{transform:translateY(-1px);}
.confirm-modal-btn:active{transform:translateY(0);}
.confirm-modal-btn-secondary{background:#fff;color:#475569;border:1.5px solid #cbd5e1;}
.confirm-modal-btn-secondary:hover{background:#f8fafc;border-color:#94a3b8;}
.confirm-modal-btn-secondary:active{background:#f1f5f9;}
.confirm-modal-btn-primary{background:linear-gradient(135deg,#1a365d 0%,#0f2847 100%);color:#fff;box-shadow:0 2px 4px rgba(15,40,71,.25);}
.confirm-modal-btn-primary:hover{box-shadow:0 4px 8px rgba(15,40,71,.35);}
.confirm-modal-btn-primary:active{box-shadow:0 2px 4px rgba(15,40,71,.25);}

/* 警告ブロック（モーダル内） */
.modal-warning-block{display:flex;align-items:flex-start;gap:8px;background:#fef3c7;border:1px solid #fcd34d;border-radius:8px;padding:10px 12px;margin-top:12px;text-align:left;}
.modal-warning-icon{width:18px;height:18px;color:#d97706;flex-shrink:0;margin-top:1px;font-size:16px;}
.modal-warning-block span{color:#92400e;font-size:13px;font-weight:500;line-height:1.5;}
.modal-strong-text{font-weight:600;color:#1e293b;}

/* Modal Dialog */
.modal-overlay{position:fixed;inset:0;background:rgba(0,0,0,.5);z-index:10001;display:flex;align-items:center;justify-content:center;animation:modal-fade-in .2s ease-out;padding:16px;}
@keyframes modal-fade-in{from{opacity:0}to{opacity:1}}
.modal-content{background:#fff;border-radius:12px;max-width:500px;width:90%;max-height:90vh;overflow:auto;animation:modal-scale-in .3s cubic-bezier(.175,.885,.32,1.275);box-shadow:0 20px 60px rgba(0,0,0,.3);padding:20px;}
@keyframes modal-scale-in{from{transform:scale(.9);opacity:0}to{transform:scale(1);opacity:1}}
.modal-header{padding:0 0 12px 0;border-bottom:1px solid #e2e8f0;}
.modal-title{font-size:18px;font-weight:600;color:#1e293b;}
.modal-body{padding:12px 0 0 0;color:#475569;line-height:1.6;}
.modal-body > *{margin:0 !important;}
.modal-body > * + *{margin-top:8px !important;}

/* Markdown styling in modal */
.modal-body .markdown-content{line-height:1.6;}
.modal-body .markdown-content h2,.modal-body .markdown-content h3{font-weight:600;color:#1e293b;margin-top:8px;margin-bottom:6px;}
.modal-body .markdown-content h2{font-size:16px;}
.modal-body .markdown-content h3{font-size:14px;}
.modal-body .markdown-content strong{font-weight:600;color:#1e293b;}
.modal-body .markdown-content p{margin:4px 0;}
.modal-body .markdown-content ul{margin:6px 0;padding-left:20px;list-style:disc;}
.modal-body .markdown-content li{margin:3px 0;}
.modal-body .markdown-content code{background:#f1f5f9;border-radius:4px;padding:2px 6px;font-size:12px;font-family:monospace;color:#475569;}
.modal-footer{padding:12px 0 0 0;border-top:1px solid #e2e8f0;display:flex;justify-content:flex-end;gap:12px;margin-top:12px !important;}
.modal-button{padding:10px 20px;border-radius:6px;font-weight:500;font-size:14px;transition:all .2s;cursor:pointer;border:none;}
.modal-button-primary{background:linear-gradient(135deg,#1a365d 0%,#0f2847 100%);color:#fff;}
.modal-button-primary:hover{box-shadow:0 4px 12px rgba(15,40,71,.35);transform:translateY(-1px);}
.modal-button-secondary{background:#fff;color:#64748b;border:1.5px solid #cbd5e1;}
.modal-button-secondary:hover{background:#f8fafc;border-color:#94a3b8;}

/* Section metadata text */
.section-metadata{font-family:"Noto Sans JP",Roboto,Arial,sans-serif;font-size:12px;}

/* Sticky header container */
.sticky-header-container{position:sticky;top:0;z-index:1000;background:#f5f7fa;}

/* Main content container */
.main-content-container{padding-top:0;}

/* 統一されたフォームスタイル */
.form-input{width:100%;padding:10px 12px;border:1.5px solid #e2e8f0;border-radius:6px;font-size:14px;color:#1e293b;background:#fff;transition:all .2s}
.form-input:focus{outline:none;border-color:#1a365d;box-shadow:0 0 0 3px rgba(26,54,93,.12)}
.form-input:disabled{background:#f1f5f9;color:#94a3b8;cursor:not-allowed}
.form-input::placeholder{color:#94a3b8}
.form-label{display:block;font-weight:500;font-size:13px;color:#475569;margin-bottom:6px}
.form-group{margin-bottom:16px}

/* カードコンポーネント */
.card{background:#fff;border:1px solid #e2e8f0;border-radius:8px;box-shadow:0 2px 4px rgba(0,0,0,.04)}
.card-header{padding:16px 20px;border-bottom:1px solid #e2e8f0;font-weight:600;font-size:15px;color:#1e293b;display:flex;justify-content:space-between;align-items:center}
.card-body{padding:20px}
.card-footer{padding:16px 20px;border-top:1px solid #e2e8f0;background:#f8fafc}

/* バッジスタイル */
.badge{display:inline-flex;align-items:center;padding:4px 10px;border-radius:9999px;font-size:12px;font-weight:500}
.badge-success{background:#dcfce7;color:#166534}
.badge-warning{background:#fef3c7;color:#92400e}
.badge-error{background:#fee2e2;color:#991b1b}
.badge-info{background:#dbeafe;color:#1e40af}
.badge-neutral{background:#f1f5f9;color:#475569}

/* テーブルの改善 */
.data-table{width:100%;border-collapse:collapse;font-size:13px}
.data-table th{background:#f8fafc;font-weight:600;text-align:left;padding:12px;border-bottom:2px solid #e2e8f0;color:#475569;white-space:nowrap;position:sticky;top:0;z-index:10}
.data-table td{padding:10px 12px;border-bottom:1px solid #f1f5f9;color:#1e293b}
.data-table tr:hover{background:#f8fafc}
.data-table tr:nth-child(even){background:#fafbfc}

/* ローディングスピナー */
.spinner{display:inline-block;width:20px;height:20px;border:2px solid #e2e8f0;border-top-color:#1a365d;border-radius:50%;animation:spin .6s linear infinite}
@keyframes spin{to{transform:rotate(360deg)}}
.spinner-sm{width:14px;height:14px;border-width:1.5px}
.spinner-lg{width:32px;height:32px;border-width:3px}

/* スクロールバーのカスタマイズ */
::-webkit-scrollbar{width:8px;height:8px}
::-webkit-scrollbar-track{background:#f1f5f9;border-radius:4px}
::-webkit-scrollbar-thumb{background:#cbd5e1;border-radius:4px}
::-webkit-scrollbar-thumb:hover{background:#94a3b8}

/* フォーカスリング */
*:focus-visible{outline:2px solid #1a365d;outline-offset:2px}
button:focus-visible,a:focus-visible{outline:2px solid #1a365d;outline-offset:2px}

/* スケルトンローダー */
.skeleton{background:linear-gradient(90deg,#f1f5f9 25%,#e2e8f0 50%,#f1f5f9 75%);background-size:200% 100%;animation:skeleton-loading 1.5s infinite}
@keyframes skeleton-loading{0%{background-position:200% 0}100%{background-position:-200% 0}}
.skeleton-text{height:16px;border-radius:4px;margin-bottom:8px}
.skeleton-text:last-child{width:60%}

.sandbox-results-container{border-top:2px solid #e2e8f0;background:#f8fafc;box-sizing:border-box;display:flex;flex-direction:column;height:400px}
.sandbox-results-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:12px;padding:16px 16px 0 16px;flex-shrink:0}
.sandbox-results-title{font-weight:600;color:#1e293b;font-size:14px;display:flex;align-items:center;gap:6px}
.sandbox-results-clear-btn{padding:4px 8px;background:white;border:1px solid #e2e8f0;border-radius:4px;font-size:11px;color:#64748b;cursor:pointer}
.sandbox-results-content{flex-grow:1;overflow-y:auto;padding:0 16px 16px 16px}

.copilot-image-grid{display:flex;gap:8px;margin-top:10px;flex-wrap:wrap;justify-content:flex-start;align-items:flex-start}
.copilot-image-grid-cols-1{grid-template-columns:repeat(1,minmax(0,1fr))}
.copilot-image-grid-cols-2{grid-template-columns:repeat(2,minmax(0,1fr))}
.copilot-image-item{width:clamp(90px,12vw,140px);height:auto;max-height:clamp(90px,12vw,140px);object-fit:contain;border-radius:10px;border:1px solid #e2e8f0;cursor:pointer;margin:0}

.exec-code-block-container{position:relative;margin:12px 0}
.exec-code-block-wrapper{background:#0f172a;border-radius:8px;overflow:hidden;border:1px solid #334155}
.exec-code-block-header{background:#1e293b;padding:8px 12px;display:flex;justify-content:space-between;align-items:center;border-bottom:1px solid #334155}
.exec-code-lang-label{color:#94a3b8;font-size:12px;font-weight:500}
.exec-code-run-btn{background:linear-gradient(135deg,#10b981 0%,#059669 100%);color:white;border:none;padding:4px 12px;border-radius:6px;font-size:11px;font-weight:600;cursor:pointer;transition:all 0.2s;box-shadow:0 2px 4px rgba(16,185,129,0.2)}
.exec-code-run-btn:hover{transform:translateY(-1px);box-shadow:0 4px 8px rgba(16,185,129,0.3)}
.exec-code-run-btn:active{transform:translateY(0);box-shadow:0 2px 4px rgba(16,185,129,0.2)}
.exec-code-pre{margin:0;padding:16px;overflow-x:auto}
.exec-code-content{color:#fff;font-size:13px;line-height:1.6}

.sandbox-exec-error{background:#fef2f2;border:1px solid #fecaca;border-radius:6px;padding:12px;margin-bottom:12px}
.sandbox-exec-error-title{color:#991b1b;font-weight:600;font-size:13px;margin-bottom:6px}
.sandbox-exec-error-pre{color:#dc2626;font-size:12px;white-space:pre-wrap;margin:0;font-family:monospace}
.sandbox-exec-stdout{background:white;border:1px solid #e2e8f0;border-radius:6px;padding:12px;margin-bottom:12px}
.sandbox-exec-stdout-title{color:#475569;font-weight:600;font-size:13px;margin-bottom:6px}
.sandbox-exec-stdout-pre{color:#1e293b;font-size:12px;white-space:pre-wrap;margin:0;font-family:monospace}
.sandbox-exec-stderr{background:#fffbeb;border:1px solid #fde68a;border-radius:6px;padding:12px;margin-bottom:12px}
.sandbox-exec-stderr-title{color:#92400e;font-weight:600;font-size:13px;margin-bottom:6px}
.sandbox-exec-stderr-pre{color:#b45309;font-size:12px;white-space:pre-wrap;margin:0;font-family:monospace}
.sandbox-exec-result{background:white;border:1px solid #e2e8f0;border-radius:6px;padding:12px;margin-bottom:12px}
.sandbox-exec-result-title{color:#475569;font-weight:600;font-size:13px;margin-bottom:6px}
.sandbox-exec-result-content{overflow:auto;max-height:260px}
.sandbox-exec-plots{background:white;border:1px solid #e2e8f0;border-radius:6px;padding:12px}
.sandbox-exec-plots-title{color:#475569;font-weight:600;font-size:13px;margin-bottom:12px}
.sandbox-exec-plots-grid{display:grid;gap:12px}
.sandbox-exec-plot-item{border:1px solid #e2e8f0;border-radius:6px;overflow:hidden;background:white;max-width:100%;cursor:pointer;box-sizing:border-box}
.sandbox-exec-plot-img{max-width:50%;height:auto;display:block;margin:0 auto}
.sandbox-exec-empty{color:#64748b;font-size:13px;text-align:center;padding:20px}

.image-modal-overlay{position:fixed;top:0;left:0;width:100vw;height:100vh;background:rgba(0,0,0,0.95);display:flex;justify-content:center;align-items:center;z-index:10000;cursor:pointer;box-sizing:border-box;padding:20px}
.image-modal-img{max-width:98vw;max-height:98vh;object-fit:contain;box-sizing:border-box;box-shadow:0 4px 30px rgba(0,0,0,0.6);border-radius:6px}

.login-overlay{position:fixed;inset:0;z-index:9999;display:flex;align-items:stretch;justify-content:center}
.login-bg{position:absolute;inset:0;overflow:hidden;background:linear-gradient(135deg,#0a1628 0%,#0d1f3c 50%,#0a1628 100%)}
.login-bg::after{content:"";position:absolute;inset:-2px;background-image:radial-gradient(rgba(255,255,255,.15) 1px,transparent 1px);background-size:18px 18px;opacity:.2;mask-image:radial-gradient(circle at 50% 35%,black 0%,transparent 70%)}
.login-shell{position:relative;z-index:1;width:100%;padding:20px;display:flex;align-items:center;justify-content:center}
.login-panel{width:min(980px,100%);display:grid;gap:20px}
@media (min-width:768px){.login-panel{grid-template-columns:1.12fr .88fr;gap:24px}}
.login-blob{position:absolute;border-radius:9999px;filter:blur(42px);opacity:.55;transform:translate3d(0,0,0);animation:login-float 12s ease-in-out infinite}
.login-blob-1{width:520px;height:520px;left:-140px;top:-140px;background:radial-gradient(circle at 30% 30%,rgba(26,54,93,.85),rgba(26,54,93,.12) 60%,transparent 72%);animation-duration:14s}
.login-blob-2{width:540px;height:540px;right:-180px;top:40px;background:radial-gradient(circle at 35% 35%,rgba(15,40,71,.85),rgba(15,40,71,.10) 62%,transparent 74%);animation-duration:16s;animation-delay:-2s}
.login-blob-3{width:560px;height:560px;left:15%;bottom:-220px;background:radial-gradient(circle at 30% 30%,rgba(37,99,235,.65),rgba(37,99,235,.08) 62%,transparent 74%);animation-duration:18s;animation-delay:-4s}
@keyframes login-float{0%{transform:translate3d(0,0,0) scale(1)}50%{transform:translate3d(30px,-18px,0) scale(1.04)}100%{transform:translate3d(0,0,0) scale(1)}}
.login-grid{position:absolute;inset:-2px;background:linear-gradient(to right,rgba(255,255,255,.05) 1px,transparent 1px),linear-gradient(to bottom,rgba(255,255,255,.04) 1px,transparent 1px);background-size:72px 72px;opacity:.15;mask-image:radial-gradient(circle at 50% 35%,black 0%,transparent 70%)}
.login-card{border-radius:20px;background:rgba(10,22,45,.92);backdrop-filter:blur(16px);-webkit-backdrop-filter:blur(16px);border:1px solid rgba(255,255,255,.1);box-shadow:0 30px 90px rgba(0,0,0,.5),0 0 0 1px rgba(255,255,255,.06) inset;overflow:hidden}
.login-card-header{padding:22px 22px 16px 22px;background:rgba(255,255,255,.04);border-bottom:1px solid rgba(255,255,255,.08)}
.login-card-body{padding:18px 22px 22px 22px}
.login-badge{width:38px;height:38px;border-radius:14px;display:flex;align-items:center;justify-content:center;font-weight:800;letter-spacing:.06em;font-size:12px;color:white;background:linear-gradient(135deg,#1a365d 0%,#2563eb 55%,#3b82f6 110%);box-shadow:0 10px 30px rgba(26,54,93,.4)}
.login-pill{display:inline-flex;align-items:center;padding:6px 10px;border-radius:9999px;font-size:12px;font-weight:600;color:rgba(255,255,255,.88);background:rgba(255,255,255,.12);border:1px solid rgba(255,255,255,.18);backdrop-filter:blur(10px);-webkit-backdrop-filter:blur(10px)}
.login-brand-mark{background:linear-gradient(135deg,#1a365d 0%,#2563eb 55%,#3b82f6 110%);box-shadow:0 14px 36px rgba(37,99,235,.2),0 10px 30px rgba(26,54,93,.2)}
.login-alert{display:flex;align-items:flex-start;gap:10px;background:rgba(254,242,242,.9);border:1px solid rgba(239,68,68,.25);border-radius:12px;padding:12px 12px;color:#991b1b}
.login-alert-icon{width:20px;height:20px;border-radius:9999px;display:flex;align-items:center;justify-content:center;background:#ef4444;color:white;font-weight:900;flex:0 0 auto;margin-top:1px}
.login-input-wrap{position:relative;width:100%}
.login-input-icon{position:absolute;left:12px;top:50%;transform:translateY(-50%);color:#475569;pointer-events:none;z-index:1}
.login-input{border-radius:12px;padding:10px 12px 10px 40px;background:rgba(255,255,255,.95);border-color:rgba(226,232,240,.95);height:44px;box-sizing:border-box;line-height:1.5}
.login-input::-ms-reveal,.login-input::-ms-clear{display:none}
.login-input::-webkit-credentials-auto-fill-button,.login-input::-webkit-textfield-decoration-container{display:none !important}
.login-input:focus{border-color:#2563eb;box-shadow:0 0 0 4px rgba(37,99,235,.2)}
.login-reveal{position:absolute;right:10px;top:50%;transform:translateY(-50%);width:34px;height:34px;border-radius:10px;border:1px solid rgba(226,232,240,.9);background:rgba(255,255,255,.6);color:#64748b;display:flex;align-items:center;justify-content:center;transition:all .2s;z-index:2}
.login-reveal:hover:not(:disabled){background:rgba(255,255,255,.9);transform:translateY(-50%) translateY(-1px);box-shadow:0 6px 16px rgba(2,6,23,.12)}
.login-reveal:disabled{opacity:.6;cursor:not-allowed}
.login-submit{border-radius:14px;padding:12px 18px}
/* ログインページ マスコット表示 */
.login-mascot-img{width:180px;height:auto;filter:drop-shadow(0 8px 24px rgba(0,0,0,.35));margin-bottom:20px}
.login-mascot-title{color:#fff;font-size:2.6rem;font-weight:800;letter-spacing:.04em;text-shadow:0 4px 20px rgba(0,0,0,.4);line-height:1.2}
.login-mascot-subtitle{color:rgba(255,255,255,.85);font-size:1.3rem;font-weight:600;margin-top:8px;letter-spacing:.08em}
/* ログインページ 右下ウォーターマーク */
.login-watermark{position:absolute;right:-40px;bottom:-60px;width:380px;height:380px;opacity:.1;pointer-events:none;z-index:0;overflow:hidden}
.login-watermark img{width:100%;height:100%;object-fit:contain}
@media (prefers-reduced-motion: reduce){.login-blob{animation:none}.login-reveal{transition:none}}

/* Loading Overlay */
.loading-overlay{position:fixed;inset:0;z-index:10002;background:rgba(0,0,0,.35);backdrop-filter:blur(4px);-webkit-backdrop-filter:blur(4px);display:flex;align-items:center;justify-content:center;animation:overlay-fade-in .2s ease-out}
@keyframes overlay-fade-in{from{opacity:0}to{opacity:1}}
.loading-overlay-content{display:flex;flex-direction:column;align-items:center;gap:20px;background:rgba(255,255,255,.98);border-radius:16px;padding:32px 48px;box-shadow:0 20px 60px rgba(0,0,0,.25);animation:loading-slide-up .3s cubic-bezier(.175,.885,.32,1.275)}
@keyframes loading-slide-up{from{transform:translateY(20px);opacity:0}to{transform:translateY(0);opacity:1}}
.loading-spinner{width:48px;height:48px;position:relative}
.loading-spinner-svg{width:100%;height:100%;animation:loading-rotate 1.4s linear infinite}
@keyframes loading-rotate{100%{transform:rotate(360deg)}}
.loading-spinner-circle{stroke:url(#spinner-gradient);stroke-dasharray:80,200;stroke-dashoffset:0;stroke-linecap:round;animation:loading-dash 1.4s ease-in-out infinite}
@keyframes loading-dash{0%{stroke-dasharray:1,200;stroke-dashoffset:0}50%{stroke-dasharray:90,200;stroke-dashoffset:-35}100%{stroke-dasharray:90,200;stroke-dashoffset:-125}}
.loading-overlay-text{font-size:16px;font-weight:600;color:#1e293b;letter-spacing:0.02em}

/* 統一UIコンポーネントライブラリ用のアニメーション */
@keyframes slide-in-right{from{transform:translateX(100%);opacity:0}to{transform:translateX(0);opacity:1}}
@keyframes slide-out-right{from{transform:translateX(0);opacity:1}to{transform:translateX(100%);opacity:0}}
.animate-slide-in-right{animation:slide-in-right .3s ease-out}
.animate-slide-out-right{animation:slide-out-right .3s ease-out}

/* Tailwind風ユーティリティクラス */
.hidden{display:none}
.md\:flex{display:none}
@media (min-width:768px){.md\:flex{display:flex}}
.flex{display:flex}
.flex-col{flex-direction:column}
.justify-center{justify-content:center}
.items-center{align-items:center}
.justify-between{justify-content:space-between}
.gap-2{gap:0.5rem}
.gap-3{gap:0.75rem}
.gap-6{gap:1.5rem}
.ml-auto{margin-left:auto}
.mb-6{margin-bottom:1.5rem}
.mt-2{margin-top:0.5rem}
.mt-4{margin-top:1rem}
.mt-6{margin-top:1.5rem}
.px-2{padding-left:0.5rem;padding-right:0.5rem}
.px-3{padding-left:0.75rem;padding-right:0.75rem}
.px-4{padding-left:1rem;padding-right:1rem}
.px-6{padding-left:1.5rem;padding-right:1.5rem}
.py-1{padding-top:0.25rem;padding-bottom:0.25rem}
.py-2{padding-top:0.5rem;padding-bottom:0.5rem}
.text-sm{font-size:0.875rem;line-height:1.25rem}
.text-xs{font-size:0.75rem;line-height:1rem}
.text-lg{font-size:1.125rem;line-height:1.75rem}
.text-xl{font-size:1.25rem;line-height:1.75rem}
.text-3xl{font-size:1.875rem;line-height:2.25rem}
.font-normal{font-weight:400}
.font-semibold{font-weight:600}
.font-bold{font-weight:700}
.tracking-wide{letter-spacing:0.025em}
.tracking-tight{letter-spacing:-0.025em}
.leading-tight{line-height:1.25}
.leading-relaxed{line-height:1.625}
.opacity-80{opacity:0.8}
.opacity-90{opacity:0.9}
.text-white{color:#fff}
.text-white\/90{color:rgba(255,255,255,0.9)}
.text-white\/80{color:rgba(255,255,255,0.8)}
.text-white\/70{color:rgba(255,255,255,0.7)}
.text-white\/50{color:rgba(255,255,255,0.5)}
.text-slate-900{color:#0f172a}
.text-slate-600{color:#475569}
.text-slate-500{color:#64748b}
.max-w-\[44ch\]{max-width:44ch}
.w-8{width:2rem}
.h-8{height:2rem}
.w-10{width:2.5rem}
.h-10{height:2.5rem}
.w-full{width:100%}
.w-5{width:1.25rem}
.h-5{height:1.25rem}
.h-16{height:4rem}
.rounded-md{border-radius:0.375rem}
.rounded-xl{border-radius:0.75rem}
.flex-wrap{flex-wrap:wrap}
.shadow-lg{box-shadow:0 10px 15px -3px rgba(0,0,0,0.1),0 4px 6px -2px rgba(0,0,0,0.05)}
.sticky{position:sticky}
.top-0{top:0}
.z-50{z-index:50}
.bg-white\/15{background-color:rgba(255,255,255,0.15)}
.bg-white\/25{background-color:rgba(255,255,255,0.25)}
.hover\:bg-white\/25:hover{background-color:rgba(255,255,255,0.25)}
.border{border-width:1px}
.border-white\/25{border-color:rgba(255,255,255,0.25)}
.transition{transition-property:all;transition-timing-function:cubic-bezier(0.4,0,0.2,1);transition-duration:150ms}
.space-y-4>:not([hidden])~:not([hidden]){--tw-space-y-reverse:0;margin-top:calc(1rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(1rem * var(--tw-space-y-reverse))}
.space-y-1\.5>:not([hidden])~:not([hidden]){--tw-space-y-reverse:0;margin-top:calc(0.375rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(0.375rem * var(--tw-space-y-reverse))}
.pr-11{padding-right:2.75rem}
.inline-flex{display:inline-flex}
.justify-center{justify-content:center}

/* 検索結果・空状態表示用 */
.empty-state{text-align:center;padding:40px;color:#64748b}
.empty-state-icon{font-size:48px;margin-bottom:16px}
.empty-state-icon i{color:#94a3b8}
.empty-state-title{font-size:16px;font-weight:500}
.empty-state-subtitle{font-size:14px;margin-top:8px}

/* Font Awesomeアイコン共通調整 */
.fas,.far,.fab{vertical-align:middle}
button .fas,button .far,a .fas,a .far{margin-right:4px}

/* 検索結果カード */
.search-result-card{margin-bottom:24px;border-left:4px solid #1a365d}
.search-result-header{background:linear-gradient(135deg,#1a365d 0%,#0f2847 100%);color:white;padding:16px}
.search-result-header-row{display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:12px}
.search-result-header-left{display:flex;align-items:center;gap:12px;flex:1}
.search-result-badge-white{background:rgba(255,255,255,0.3);color:white;font-size:14px;padding:6px 12px}
.search-result-filename{font-weight:600;font-size:16px;margin-bottom:4px}
.search-result-path{font-size:12px;opacity:0.9}
.search-result-stats{display:flex;align-items:center;gap:8px;flex-wrap:wrap}
.search-result-stat-badge{background:rgba(255,255,255,0.25);color:white;font-size:13px;padding:6px 12px}
.search-result-download-btn{background:white;color:#1a365d;border:none;padding:6px 12px;border-radius:4px;cursor:pointer;font-size:12px;font-weight:600}
.search-result-download-btn:hover{background:#f8fafc}
.search-result-body-title{font-weight:600;margin-bottom:12px;color:#334155;font-size:14px}
.search-result-images-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(180px,1fr));gap:16px}
.search-result-image-aspect{position:relative;width:100%;padding-top:141%;background:#f8fafc;overflow:hidden}
.search-result-image-info{padding:12px;background:white;border-top:1px solid #e2e8f0}
.search-result-image-title{font-size:13px;font-weight:600;color:#334155;margin-bottom:4px}
.search-result-image-similarity{font-size:11px;color:#64748b}

/* ========================================
   ファイル状態バッジ（4段階）
   ======================================== */

/* 未処理（未実行） */
.status-pending {
  background-color: #e5e7eb;
  color: #6b7280;
  font-size: 12px;
  padding: 2px 8px;
  border-radius: 4px;
  font-weight: 500;
}

/* キュー待ち（待機中） */
.status-queued {
  background-color: #fef3c7;
  color: #92400e;
  font-size: 12px;
  padding: 2px 8px;
  border-radius: 4px;
  font-weight: 500;
}

/* 処理中（画像化中/ベクトル化中） */
.status-processing {
  background-color: #dbeafe;
  color: #1e40af;
  font-size: 12px;
  padding: 2px 8px;
  border-radius: 4px;
  font-weight: 500;
  animation: pulse 1.5s infinite;
}

/* 完了 */
.status-completed {
  background-color: #d1fae5;
  color: #065f46;
  font-size: 12px;
  padding: 2px 8px;
  border-radius: 4px;
  font-weight: 500;
}

/* エラー */
.status-error {
  background-color: #fee2e2;
  color: #991b1b;
  font-size: 12px;
  padding: 2px 8px;
  border-radius: 4px;
  font-weight: 500;
}

/* パルスアニメーション */
@keyframes pulse {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.6; }
}

/* 並列処理進捗表示用 */
.parallel-progress-container {
  background: #f9fafb;
  border-radius: 8px;
  padding: 16px;
  margin-top: 16px;
}

.parallel-worker-item {
  background: white;
  border: 1px solid #e5e7eb;
  border-radius: 6px;
  padding: 12px;
  margin-bottom: 8px;
  box-shadow: 0 1px 3px rgba(0,0,0,0.1);
}

.parallel-worker-item[data-state="processing"] {
  border-left: 4px solid #3b82f6;
}

.parallel-worker-item[data-state="complete"] {
  border-left: 4px solid #10b981;
}

.parallel-worker-item[data-state="error"] {
  border-left: 4px solid #ef4444;
}

.parallel-worker-item[data-state="queued"] {
  border-left: 4px solid #f59e0b;
}

.parallel-worker-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 8px;
}

.parallel-worker-icon {
  font-weight: 600;
  color: #374151;
  font-size: 14px;
}

.parallel-worker-status {
  font-size: 11px;
  padding: 2px 8px;
  border-radius: 12px;
}

.parallel-worker-file {
  font-size: 13px;
  color: #6b7280;
  margin-bottom: 8px;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.progress-bar-mini {
  height: 6px;
  background: #e5e7eb;
  border-radius: 3px;
  overflow: hidden;
  margin-bottom: 4px;
}

.progress-fill-mini {
  height: 100%;
  background: linear-gradient(90deg, #3b82f6, #60a5fa);
  transition: width 0.3s ease;
}

.parallel-worker-progress-text {
  font-size: 11px;
  color: #6b7280;
}
